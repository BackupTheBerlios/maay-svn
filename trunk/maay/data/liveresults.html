<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xmlns:nevow="http://nevow.com/ns/nevow/0.1">
  <head>
    <title>Live results</title>
    <link rel="stylesheet" type="text/css" href="maaycss"/>
    <link rel="shortcut icon" href="images/maay.ico" />
    <nevow:invisible nevow:render="liveglue" />

    <script type='text/javascript' language='javascript'>
function updateResults(source) {
  div = document.getElementById('resultsDiv');
  div.innerHTML = source;
}
function startConnection() {
  var d = server.callRemote('connect');
}

function browseResults(offset) {
  var d = server.callRemote('browseResults', offset);
  d.addCallback(updateResults);
}

function onlyLocalResults() {
  var d = server.callRemote('setLocalFlag', 1);
  d.addCallback(updateResults);
}

function onlyDistantResults() {
  var d = server.callRemote('setDistantFlag', 1);
  d.addCallback(updateResults);
}

function allResults() {
  var d = server.callRemote('unsetFlags');
  d.addCallback(updateResults);
}

    </script>

  </head>
  <body onload="startConnection()">
  <div class="headlinks"><a href="/indexation" class="headlink">[Indexation&nbsp;Page]&nbsp;</a></div>
  <div class="reSearch">
    <form action="search" accept-charset="utf-8">
      <table>
        <tr>
          <td><a href="/"><img border="0" src="images/smallmaay.png" /></a></td>
          <td><input type="text" name="words" nevow:render="searchfield"><nevow:attr name="value" ><nevow:slot name="words" /></nevow:attr></input></td>
          <td><input type="submit" class="searchButton" value="search" /></td>
	</tr>
      </table>
    </form>
  </div>
  <!--
    <div class="sort"><a href="">Sort by date</a> - <a href="">Sort by popularity</a></div>
  -->
  <div id="resultsDiv">
   <div class="message" nevow:render="title">Results <nevow:slot name="start_result" /> - <nevow:slot name="end_result" /> (<nevow:slot name="count" />) for <b><nevow:slot name="words" /></b>.</div>
   <nevow:invisible nevow:macro="prevnext" />
   <table>
     <tr>
       <td><div class="localPublicResult"><a href="javascript: onlyLocalResults();"><span nevow:render="localcount" /> local</a></div></td>
       <td> - </td>
       <td> <div class="distantResult"><a href="javascript: onlyDistantResults();"><span nevow:render="distantcount" /> distant</a></div></td>
       <td>-</td>
       <td><a href="javascript: allResults();"><span nevow:render="totalcount" /> all</a></td>
     </tr>
   </table>
    <table class="results" nevow:render="sequence" nevow:data="results">
      <tr nevow:pattern="item" nevow:render="row">
        <td>
  	<div>
      <nevow:attr name="class"><nevow:slot name="resultClass" /></nevow:attr>
  	  <table><tr><td><div><nevow:attr name="class"><nevow:slot name="mime_type" /></nevow:attr></div></td><td><a class="docTitle"><nevow:attr name="href">/download?docid=<nevow:slot name="docid" />&amp;words=<nevow:slot name="words" /></nevow:attr><nevow:slot name="doctitle">DOC TITLE</nevow:slot></a></td></tr></table>
  	  <div class="resultDesc"><nevow:slot name="abstract" /></div>
  	  <span class="resultUrl"><nevow:attr name="href"><nevow:slot name="docurl" /></nevow:attr><nevow:slot name="docurl" /> - <nevow:slot name="readable_size" /> - <nevow:slot name="publication_date" /></span>
  	</div>
        </td>
      </tr>
    </table>
    <nevow:invisible nevow:macro="prevnext" />
    <nevow:invisible nevow:macro="footer" />
  </div>
 </body>
</html>
